# Hitori Solver & Generator

Это приложение на Python для генерации и решения японских головоломок **Hitori**. Программа обладает графическим интерфейсом (на базе PyQt5) для удобного просмотра исходных полей и найденных решений.

## Особенности

*   **Решение задач из файла:** Считывает текстовый файл с полем и находит все возможные решения.
*   **Генерация полей:** Создает случайные поля заданного размера и проверяет их на наличие решений.
*   **Графический интерфейс:** Визуализация процесса. Слева отображается исходное поле, справа — найденное решение.
*   **Навигация:** Если решений несколько (или сгенерировано несколько полей), можно переключаться между ними.
*   **Гибкая настройка:** Возможность указать количество компонент связности (стандартно — 1) и ограничение на количество решений.

## Требования

*   Python 3.x
*   PyQt5

## Установка

1.  Скачайте проект.
2.  Установите необходимые зависимости:

```bash
pip install PyQt5
```

## Структура проекта

```text
.
├── hitori.py              # Скрипт для решения задачи из файла
├── generator.py           # Скрипт для генерации случайных задач
├── solver.py              # Класс-связка логики решения и GUI
├── creator.py             # Класс-связка логики генерации и GUI
├── field.txt              # Пример файла с задачей
├── test_field.py          # Тесты для класса Field
├── test_resolver.py       # Тесты для алгоритма решения
├── gui/                   # Пакет с графическим интерфейсом
│   ├── SolutionViewer.py  # Главное окно просмотра решений
│   ├── TwoFieldsWidget.py # Виджет двух полей (задача + решение)
│   ├── FieldWidget.py     # Виджет одного поля
│   └── CellWidget.py      # Виджет одной клетки
├── game/                  # Пакет с игровой логикой
│   ├── resolver.py        # Алгоритм поиска решений (backtracking)
│   ├── field.py           # Модель игрового поля
│   └── ...
├── generate/              # Пакет генерации
└── interface/             # Пакет парсинга входных данных
```

## Использование

### 1. Решение задачи из файла

Для запуска решения существующей головоломки используйте `hitori.py`.

Формат файла с задачей (например, `field.txt`):
```text
1 2 2
2 1 4
4 3 2
```
Числа разделяются пробелами, строки — переносом строки.

**Запуск:**
```bash
python hitori.py input.txt
```

**Дополнительные аргументы:**
*   `-m <число>` (или `--max_solves`): Максимальное количество решений для поиска (по умолчанию 5).
*   `-c <число>` (или `--num_components`): Требуемое количество компонент связности белых клеток (по умолчанию 1).

Пример:
```bash
python hitori.py input.txt -m 1
```

### 2. Генерация задач

Для создания случайных полей и просмотра их решений используйте `generator.py`.

**Запуск:**
```bash
python generator.py -W 5 -H 5
```
*   `-W` (Width): Ширина поля (обязательно).
*   `-H` (Height): Высота поля (обязательно).

**Дополнительные аргументы:**
*   `-f <число>` (или `--fields`): Сколько полей сгенерировать (по умолчанию 1). В GUI появятся кнопки навигации между полями.
*   `-m <число>`: Максимум решений для поиска.

Пример генерации 3-х полей размером 6x6:
```bash
python generator.py -W 6 -H 6 -f 3
```

## Запуск тестов

Для проверки корректности работы логики можно запустить юнит-тесты:

```bash
python -m unittest test_field.py
python -m unittest test_resolver.py
```

## Правила Hitori

1.  Нужно закрасить некоторые клетки так, чтобы в каждой строке и каждом столбце числа не повторялись (среди незакрашенных).
2.  Закрашенные клетки не могут касаться друг друга сторонами (по диагонали можно).
3.  Все незакрашенные клетки должны быть соединены в единую группу (компоненту связности), то есть от любой белой клетки можно добраться до любой другой, двигаясь только по белым клеткам.